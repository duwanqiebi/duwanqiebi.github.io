---
layout:     post
category: [Thymeleaf, 框架学习]
title:      "Thymeleaf学习(二)"
subtitle:   "官方实例程序简介"
date:       2016-04-15 12:00:00
author:     "独顽且鄙"
header-img: "img/post-bg-2015.jpg"
tags:
    - Thymeleaf
---


## Message

> Externalizing text is extracting fragments of template code out of template files so that they can be kept in specific separate files (typically .properties files) and that they can be easily substituted by equivalent texts written in other languages (a process called internationalization or simply i18n). Externalized fragments of text are usually called “messages”.

这是官方对于“信息”的定义，简要理解，就是具体的文本内容。通过property文件定义文本内容(国际化)，并在模版中通过key来应用。相应语法为： #{...}

### th:text

<pre class="prettyprint linenums html">
&lt;p th:text="#{home.welcome}"&gt;Welcome to our grocery store!&lt;/p&gt;
</pre>

上面是官方例子中home.html中的一行代码。模板引擎工作时，标准信息解析器(standard message resolver)会在home.html同目录下同名的property文件中寻找相应的key，例如：

- /WEB-INF/templates/home_en.properties :英语property文件
- /WEB-INF/templates/home_es.properties :西班牙语property文件
- /WEB-INF/templates/home_pt_BR.properties : 葡萄牙语property文件
- /WEB-INF/templates/home.properties :默认环境

thymeleaf会根据当前环境的语言设置(locale)来获得相应语言环境的资源文件，如果找不到，则使用默认的资源文件，即home.properties。

接着我们可以看看home_en.properties中对home.welocme的配置。
<pre class="prettyprint linenums html">
home.welcome = Welcome to our grocery store!
</pre>

### th:utext

我们使用th:text已经可以显示一些基本的信息了，但是还有一些特殊的情况，例如我们想把信息中的一些字加粗:
<pre class="prettyprint linenums html">
&lt;p th:text="#{home.welcome}"&gt;Welcome to our grocery store，&lt;b&gt;duwanqiebi&lt;/b&gt;!&lt;/p&gt;
</pre>
如果使用th:text标签，模板的解析结果就会像下面这样：
<pre class="prettyprint linenums html">
&lt;p th:text="#{home.welcome}"&gt;Welcome to our grocery store，&amplt;b&ampgt;duwanqiebi&amplt;/b&ampgt;!&lt;/p&gt;
</pre>

可以看到,<b>标签被转义成&amplt;b&ampgt;,但是这并不是我们想要看到的。所以，我们可以使用th:utext来防止标签被转义。
<pre class="prettyprint linenums html">
&lt;p th:utext="#{home.welcome}"&gt;Welcome to our grocery store，&lt;b&gt;duwanqiebi&lt;/b&gt;!&lt;/p&gt;
</pre>